---
hidden: true
title: "전환 추적 (Conversion Tracking)"
description: "Notifly가 Campaign 메시지를 구매 및 가입과 같은 사용자 행동에 연결하는 방법."
---

## 개요

전환 추적은 Campaign 메시지를 사용자 행동에 연결합니다. 누군가 메시지를 받고 나중에 구매하면, 전환 추적이 그 구매가 Campaign에 기여해야 하는지 파악합니다.

## 작동 방식

### 기본 흐름

1. **사용자가 메시지 수신** - "사전 전환" 이벤트가 기록됨
2. **사용자가 행동** - 전환 이벤트 발생 (구매, 가입 등)
3. **시스템 매칭** - 전환 윈도우 내에서 행동이 Campaign에 기여됨
4. **통계 업데이트** - 전환이 Campaign 통계에 표시됨

## 사전 전환 이벤트

전환이 계산되기 전에 사용자가 먼저 메시지를 받거나 상호작용해야 합니다. 이를 "사전 전환 이벤트"라고 합니다.

### 두 가지 기여 유형

| 유형 | 의미 | 사용 용도 |
|------|------|-----------|
| `TOTAL` | 모든 메시지 발송 | "메시지를 본 사람들 중 얼마나 전환했나요?" |
| `DIRECT` | 사용자 상호작용만 | "클릭한 사람들 중 얼마나 전환했나요?" |

### 유형별 이벤트

| 이벤트 | 유형 | 의미 |
|--------|------|------|
| `send_success` | TOTAL | 메시지가 발송됨 |
| `in_app_message_show` | TOTAL | 인앱 메시지가 표시됨 |
| `in_web_message_show` | TOTAL | 인웹 메시지가 표시됨 |
| `email_click` | DIRECT | 사용자가 이메일의 링크를 클릭함 |
| `push_click` | DIRECT | 사용자가 푸시 알림을 탭함 |
| `main_button_click` | DIRECT | 사용자가 CTA 버튼을 클릭함 |
| `link_open` | DIRECT | 사용자가 링크를 클릭함 |

### 의미

- **TOTAL 전환**: 메시지를 받은 모든 사람 포함
- **DIRECT 전환**: 적극적으로 참여한 사람만 포함

예: 1,000개 메시지 발송, 100번 클릭, 50번 구매
- Total count conversion: 50 (수신자로부터의 모든 구매)
- Direct count conversion: 30 (클릭한 사람들의 구매)

## 전환 윈도우

전환 윈도우는 사용자 행동이 Campaign에 기여할 수 있는 기간입니다.

### 규칙

| 설정 | 값 |
|------|-----|
| Campaign별 설정 가능 | 1-14일 |
| 시스템 최대값 | 14일 |
| 기본값 | Campaign 설정에서 설정 |

### 작동 방식

1. 사용자가 **0일차 오전 10시**에 메시지 수신
2. 전환 윈도우: **7일**
3. 윈도우 종료: **7일차 오전 10시**
4. 5일차 구매 → **계산됨**
5. 8일차 구매 → **계산되지 않음**

## 전환 이벤트 매칭

전환 이벤트가 발생하면 시스템이 매칭되는 사전 전환 이벤트를 찾아야 합니다.

### 매칭 프로세스

1. **기본 매칭**: 사용자 ID + 시간 윈도우 내
2. **대체**: 디바이스 ID + 시간 윈도우 내
3. **최후 수단**: 디바이스 테이블에서 사용자 조회

### 왜 여러 방법?

- 사용자가 모든 기기에 로그인하지 않았을 수 있음
- 익명 사용자는 디바이스 ID만 있음
- 디바이스 테이블이 디바이스를 사용자에 연결

## 전환 유형

전환을 측정하는 다양한 방법:

| 유형 | 측정 대상 | 계산 |
|------|----------|------|
| `total_count_conversion` | 전환 수 (모든 수신자) | 이벤트 COUNT |
| `direct_count_conversion` | 전환 수 (상호작용한 사용자) | 이벤트 COUNT |
| `sales_conversion` | 총 판매 금액 | 판매 금액 SUM |
| `total_sum_conversion` | 모든 속성의 합계 | 지정된 속성 값 SUM |

### 예시

Campaign이 세일을 위해 1,000개의 이메일 발송:
- 200명이 링크 클릭 (DIRECT)
- 80명이 구매 (전환)
- 총 판매: $5,000

결과:
- `total_count_conversion`: 80
- `direct_count_conversion`: 50 (클릭한 사람들의 하위 집합)
- `sales_conversion`: $5,000

## 필터 조건

이벤트 속성에 따라 어떤 전환 이벤트를 계산할지 필터링할 수 있습니다.

### 지원되는 연산자

| 연산자 | 의미 | 예시 |
|--------|------|------|
| `=` | 같음 | `category = 'electronics'` |
| `<>` | 같지 않음 | `status <> 'cancelled'` |
| `>` | 초과 | `amount > 100` |
| `>=` | 이상 | `quantity >= 2` |
| `<` | 미만 | `price < 50` |
| `<=` | 이하 | `items <= 5` |
| `CONTAINS` | 텍스트 포함 | `product_name CONTAINS 'sale'` |
| `STARTS_WITH` | ~로 시작 | `sku STARTS_WITH 'PROMO'` |
| `ENDS_WITH` | ~로 끝남 | `code ENDS_WITH '-VIP'` |
| `MATCHES_REGEX` | 정규식 매칭 | `email MATCHES_REGEX '.*@company\.com'` |

### 사용 사례 예시

전자제품을 홍보하는 Campaign. 전자제품 구매만 계산하려면:
- 전환 이벤트: `purchase`
- 필터: `category = 'electronics'`

## 집계 출력

### 출력 필드

| 필드 | 설명 |
|------|------|
| `campaign_id` | Campaign 식별자 |
| `variant_id` | A/B 테스트 변형 |
| `metric_name` | 전환 유형 이름 |
| `metric_type` | `conversion` |
| `conversion_type` | `TOTAL` 또는 `DIRECT` |
| `value` | 횟수 또는 합계 |
| `collected_from` | 시간 버킷 시작 |
| `collected_to` | 시간 버킷 종료 |

### 값 계산

| 전환 유형 | 집계 |
|-----------|------|
| Count 전환 | 매칭 이벤트 COUNT |
| Sum 전환 | 지정된 속성 값 SUM |

## 일반적인 문제

### 전환이 계산되지 않음

| 증상 | 가능한 원인 |
|------|-------------|
| 전환이 0 | 사전 전환 이벤트가 기록되지 않음 |
| 예상보다 낮음 | 전환 윈도우 만료 |
| 일부 사용자 누락 | 사용자/디바이스 ID 불일치 |
| 잘못된 필터 | 필터 조건이 충족되지 않음 |

자세한 도움말은 [통계 불일치 문제 해결](/ko/knowledge-base/troubleshooting/statistics-discrepancies)을 참조하세요.

## 관련 문서

- [집계 개요](/ko/knowledge-base/campaigns/aggregation/index) - 집계 작동 방식
- [메시지 이벤트](/ko/knowledge-base/campaigns/aggregation/message-events) - 발송 및 상호작용 지표
- [차원](/ko/knowledge-base/campaigns/aggregation/dimensions) - 사용자 속성별 그룹화
- [Campaign 통계](/ko/knowledge-base/campaigns/statistics) - 상위 수준 개요
