---
hidden: true
title: "API 트리거 Campaign 실행 (API-Triggered Campaign Execution)"
description: "API를 사용하여 코드에서 Campaign을 트리거하는 방법."
---

## 개요

API 트리거 Campaign을 사용하면 코드에서 API를 호출하여 메시지를 보낼 수 있습니다. 예약된 시간이나 이벤트 발생 시 보내는 대신, 발송 시점을 정확하게 제어합니다.

## 요구 사항

API를 통해 Campaign을 트리거하려면 다음 조건을 충족해야 합니다:

| 요구 사항 | 설명 |
|-----------|------|
| 상태 | **Active**여야 함 |
| 타이밍 유형 | **API Triggered**여야 함 |
| phony 아님 | phony (테스트) Campaign은 API를 통해 트리거할 수 없음 |

## 수신자 제한

| 제한 | 값 |
|------|-----|
| API 호출당 최대 수신자 | 1,000 |
| 배치 크기 (내부 처리) | 배치당 30명의 수신자 |

1,000명 이상의 수신자에게 보내려고 하면 "Payload too large" 오류가 발생합니다.

## 지원 채널

모든 채널이 API 트리거를 지원하지는 않습니다. 지원되는 채널:

| 채널 | 지원 |
|------|------|
| 푸시 알림 | 예 |
| 웹 푸시 | 예 |
| 이메일 | 예 |
| 문자 메시지 (SMS) | 예 |
| 카카오 알림톡 | 예 |
| 카카오 친구톡 | 예 |
| 카카오 브랜드 메시지 | 예 |
| LINE | 예 |
| 인앱 메시지 | 아니오 |
| 인웹 메시지 | 아니오 |

## 채널별 수신자 유형

채널마다 수신자를 식별하는 다른 방법을 수락합니다:

| 채널 | 허용되는 수신자 유형 |
|------|----------------------|
| 푸시 알림 | user-id만 |
| 웹 푸시 | user-id만 |
| 이메일 | user-id, email |
| 문자 메시지 (SMS) | user-id, phone-number |
| 카카오 알림톡 | user-id, phone-number |
| 카카오 친구톡 | user-id, phone-number |
| 카카오 브랜드 메시지 | user-id, phone-number |
| LINE | user-id, line-user-id |

### 각 유형의 의미

| 수신자 유형 | 설명 |
|-------------|------|
| user-id | 내부 사용자 식별자 |
| email | 이메일 주소 |
| phone-number | 전화번호 |
| line-user-id | LINE의 사용자 식별자 |

## 발신자 정보 요구 사항

프로젝트에 적절한 발신자 정보가 구성되어 있어야 합니다:

| 채널 | 필요한 구성 |
|------|-------------|
| 푸시 알림 | `fcm_server_key` 또는 `fcm_service_account` |
| 웹 푸시 | `web_push_sender_info` |
| 이메일 | `email_message_sender_info` |
| 문자 메시지 (SMS) | `text_message_sender_info` |
| 카카오 (모든 유형) | `kakao_sender_info` |
| LINE | `line_channel_info` |

### 추가 요구 사항

| 채널 | 추가 요구 사항 |
|------|----------------|
| 카카오 (모든 유형) | Campaign에 `sender_platform`이 지정되어야 함 |
| LINE | `sender_channel_id`가 지정되어야 함 |
| 문자 메시지 (SMS) | `sender_platform`이 지정되어야 함 |

## 대체 문자 메시지

카카오 채널의 경우 대체 문자 메시지를 활성화할 수 있습니다. 카카오 메시지가 실패하면 대신 SMS가 발송됩니다.

대체 발송이 활성화된 경우:
- 프로젝트에 `text_message_sender_info`가 구성되어 있어야 함
- 발신자 정보에 `sender_phone_number`가 포함되어야 함

## 일반적인 오류

| 오류 | 원인 |
|------|------|
| "Campaign is not active" | Campaign 상태가 Active가 아님 |
| "Campaign is not configured as API triggered" | 타이밍 유형이 잘못됨 |
| "Phony campaign cannot be invoked with API" | 테스트 Campaign은 API를 사용할 수 없음 |
| "Too many recipients" | 1,000명 이상의 수신자 |
| "Invalid recipient type for [channel]" | 채널이 지원하지 않는 수신자 유형 사용 |
| "Missing required sender information" | 프로젝트에 필요한 발신자 구성이 없음 |
| "API triggered campaign is not supported for [channel]" | 해당 채널은 API 트리거를 지원하지 않음 |

## 작동 방식

1. Campaign ID와 수신자 목록으로 API를 호출함
2. Notifly가 요청을 검증함
3. 수신자가 30명씩 배치로 분할됨
4. 각 배치에 메시지가 발송됨
5. 결과가 반환됨

## 관련 문서

- [Campaign 라이프사이클](/ko/knowledge-base/campaigns/lifecycle) - Campaign 상태 이해하기
- [유효성 검사 규칙](/ko/knowledge-base/campaigns/validation) - 모든 Campaign 유효성 검사 규칙
- [오류 처리](/ko/knowledge-base/campaigns/errors) - 오류 전체 목록
