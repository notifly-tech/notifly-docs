---
hidden: true
title: "Campaign 쓰로틀링 (Campaign Throttling)"
description: "쓰로틀링은 한 번에 모두 보내는 대신 시간에 걸쳐 메시지 발송을 분산합니다."
---

## 개요

많은 사용자에게 Campaign을 보낼 때 쓰로틀링을 사용하면 발송 속도를 제어할 수 있습니다. 모든 메시지를 즉시 보내는 대신, Notifly가 대상을 작은 그룹(배치)으로 나누고 각 그룹 사이에 시간 간격을 두고 보냅니다.

파티에서 음식을 제공하는 것과 같습니다. 모든 음식을 한꺼번에 내놓아 혼잡하게 만들거나, 천천히 요리를 내놓아 모두가 혼잡 없이 즐길 수 있게 할 수 있습니다.

## 작동 방식

1. **배치 크기**를 설정합니다 (그룹당 사용자 수)
2. **간격**을 설정합니다 (각 그룹 사이 분 단위)
3. Notifly가 대상을 배치로 분할합니다
4. 각 배치가 다른 시간에 발송되도록 예약됩니다

## 설정

| 설정 | 역할 | 예시 |
|------|------|------|
| `batch_size` | 각 배치의 수신자 수 | 배치당 1000명 |
| `interval_minutes` | 배치 간 대기 시간 (분) | 배치 간 5분 |

쓰로틀링이 작동하려면 두 설정 모두 제공되어야 합니다. 둘 중 하나가 없으면 쓰로틀링이 비활성화됩니다.

## 스케줄링 공식

각 배치가 발송되는 시간은 간단한 패턴을 따릅니다:

```
배치 0: scheduled_time에 발송
배치 1: scheduled_time + interval_minutes에 발송
배치 2: scheduled_time + (interval_minutes × 2)에 발송
배치 3: scheduled_time + (interval_minutes × 3)에 발송
...계속
```

## 예시

다음과 같은 경우:
- 메시지를 보낼 사용자 5,000명
- 배치 크기: 1,000
- 간격: 5분
- 예약 시간: 오전 10:00

다음과 같이 진행됩니다:

| 배치 | 사용자 | 발송 시간 |
|------|--------|-----------|
| 1 | 1-1,000 | 오전 10:00 |
| 2 | 1,001-2,000 | 오전 10:05 |
| 3 | 2,001-3,000 | 오전 10:10 |
| 4 | 3,001-4,000 | 오전 10:15 |
| 5 | 4,001-5,000 | 오전 10:20 |

모든 5,000개의 메시지가 한꺼번에 대신 20분에 걸쳐 발송됩니다.

## 변형 Campaign (A/B 테스트)

Campaign에 여러 변형이 있는 경우 (A/B 테스트처럼), 배치 크기가 변형 간에 분할됩니다.

**공식:** `변형당_배치_크기 = floor(배치_크기 / 변형_수)`

**예시:**
- 배치 크기를 1,000으로 설정
- Campaign에 2개 변형 (A와 B)
- 각 변형이 500명씩 배치를 받음

이렇게 하면 모든 변형에서 전체 발송 속도가 일관되게 유지됩니다.

## 쓰로틀링 사용 시점

쓰로틀링이 유용한 경우:

| 상황 | 쓰로틀링이 도움이 되는 이유 |
|------|----------------------------|
| 대규모 Campaign | 트래픽의 갑작스러운 급증 방지 |
| 외부 시스템 | 파트너 API (SMS 제공업체, 이메일 서비스) 과부하 방지 |
| 랜딩 페이지 | 방문자를 분산시켜 웹사이트 다운 방지 |
| 지원 준비 | 팀이 점진적으로 응답을 처리할 시간 확보 |
| 플래시 세일 | 매장으로의 고객 흐름 제어 |

## 규칙

- `batch_size`와 `interval_minutes` 둘 다 설정해야 함 - 둘 중 하나가 없으면 쓰로틀링이 비활성화됨
- 쓰로틀링은 프로덕션 환경에서만 작동
- 모든 채널에서 작동: 푸시, 이메일, SMS, 웹 푸시, 문자 메시지
- 첫 번째 배치는 항상 예약된 Campaign 시간에 발송됨
- 사용자는 배치에 무작위로 배분됨

## 관련 문서

- [Campaign](/ko/knowledge-base/concepts/campaigns) - Campaign 개요
- [Campaign 라이프사이클](/ko/knowledge-base/campaigns/lifecycle) - Campaign이 상태를 거치는 방법
- [Campaign 생성](/ko/knowledge-base/campaigns/creation) - Campaign 설정 방법
- [글로벌 발송 빈도 제한](/ko/knowledge-base/rules/global-frequency-limit) - 사용자당 메시지 제한
