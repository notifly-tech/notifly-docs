---
hidden: true
title: "Webhook (웹훅)"
description: "Webhook (웹훅)은 특정 이벤트가 발생할 때 서버로 데이터를 보냅니다."
---

## 개요

Webhook은 사실 사용자에게 보내는 메시지가 아닙니다 - Notifly가 서버를 호출하는 방법입니다. Campaign이 트리거되면 사용자에게 메시지를 보내는 대신, Notifly가 지정한 URL로 데이터를 보냅니다. 서버는 그 데이터로 필요한 작업을 수행할 수 있습니다.

## 작동 방식

1. Campaign이 트리거됩니다 (이벤트 발생, 스케줄 실행 등)
2. Notifly가 지정한 URL로 HTTP 요청을 보냅니다
3. 서버가 데이터를 수신합니다
4. 서버가 처리하고 응답합니다
5. Notifly가 결과를 로깅합니다

## 요구 사항

- HTTP 요청을 받을 수 있는 서버 엔드포인트 URL
- 서버가 인터넷에서 접근 가능해야 함
- 서버가 타임아웃 제한 내에 응답해야 함

## Webhook 콘텐츠

| 필드 | 설명 | 필수 |
|-------|-------------|----------|
| URL | 서버 엔드포인트 | 예 |
| Method | HTTP 메서드 (GET, POST, PUT, DELETE) | 예 |
| Headers | 커스텀 HTTP 헤더 | 아니오 |
| Body | 요청 본문 콘텐츠 | 아니오 |

## HTTP 메서드

| 메서드 | 사용 시점 |
|--------|-------------|
| GET | 데이터 조회, 본문 불필요 |
| POST | 무언가를 생성하기 위해 데이터 전송 |
| PUT | 기존 데이터 업데이트 |
| DELETE | 무언가 삭제 |

## 헤더

요청에 커스텀 헤더 설정:
```json
{
  "Content-Type": "application/json",
  "Authorization": "Bearer your-token",
  "X-Custom-Header": "value"
}
```

## 본문 콘텐츠

본문에 포함할 수 있는 것:
- 정적 텍스트/JSON
- 변수를 사용한 개인화 데이터
- 사용자 속성
- 이벤트 데이터

예시 본문:
```json
{
  "user_id": "{{user.external_user_id}}",
  "action": "campaign_triggered",
  "event": "{{event.name}}"
}
```

## 개인화

Webhook은 [Liquid 템플릿](/ko/knowledge-base/concepts/liquid-templates) 개인화를 전체 지원합니다.

**지원되는 필드:**
- URL
- Headers
- Body

**예시:**
```liquid
URL: https://api.example.com/users/{{user.$user_id}}/notify
Headers:
  X-User-Segment: {{user.segment | default: "default"}}
Body:
{
  "user_id": "{{user.$user_id}}",
  "event_name": "{{event.name}}",
  "purchase_amount": {{event.amount | default: 0}}
}
```

**고급:** connected_content를 사용해 한 API에서 데이터를 가져와 webhook으로 보낼 수 있습니다:
```liquid
{% connected_content https://api.internal.com/user/{{user.$user_id}} :save user_data %}
{
  "enriched_profile": {{user_data | json}}
}
```

## 사용 사례

| 사용 사례 | 예시 |
|----------|---------|
| CRM 동기화 | 외부 시스템의 사용자 레코드 업데이트 |
| 커스텀 발송 | 자체 메시징 시스템을 통해 발송 |
| 분석 | Campaign 트리거 추적 |
| 자동화 | 외부 워크플로우 트리거 |
| 데이터 동기화 | 시스템 간 동기화 유지 |

## 규칙

- URL이 Notifly 서버에서 접근 가능해야 함
- 요청 타임아웃 적용
- 실패한 요청은 재시도될 수 있음
- [피로도 관리](/ko/knowledge-base/rules/fatigue-management) 적용 (활성화된 경우)
- [제외 사용자](/ko/knowledge-base/rules/excluded-users) 확인 없음 (사용자 메시지가 아니므로)

## 예외 사항

- 서버가 다운되면 발송 실패
- 응답이 너무 오래 걸리면 타임아웃 오류
- 유효하지 않은 URL은 즉시 실패
- SSL 인증서 문제가 요청을 차단할 수 있음

## 보안

Webhook을 보호하려면:
- HTTPS URL 사용
- 요청 출처 검증
- 인증 헤더 사용
- 필요시 요청 서명 구현

## 관련 문서

- [Campaign](/ko/knowledge-base/concepts/campaigns) - Campaign에서 webhook 사용
- [User Journey](/ko/knowledge-base/concepts/user-journeys) - Journey에서 webhook 사용
- [Liquid 템플릿](/ko/knowledge-base/concepts/liquid-templates) - 개인화 기능
- [채널](/ko/knowledge-base/channels/index) - 모든 채널
