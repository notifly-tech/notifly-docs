---
hidden: true
title: "이벤트 분기 (Event Branching)"
description: "이벤트 분기는 사용자가 하는 행동에 따라 Journey를 분기합니다."
---

## 개요

이벤트 분기 노드는 사용자 이벤트를 감시하고 사용자가 하는 행동에 따라 다른 경로로 보냅니다. 예를 들어, "사용자가 상품을 클릭하면 경로 A로; 사용자가 장바구니에 추가하면 경로 B로; 그렇지 않으면 경로 C로."

## 작동 방식

1. 사용자가 이벤트 분기 노드에 도달함
2. 시스템이 이벤트 감시를 시작함
3. 시간 윈도우 동안 대기함
4. 사용자가 일치하는 이벤트를 트리거하면 해당 분기로 이동
5. 일치 없이 시간이 만료되면 대체 경로로 이동

## 노드 구조

| 필드 | 설명 |
|------|------|
| `type` | 항상 "event-branching" |
| `details.timeWindowSeconds` | 이벤트 대기 시간 |
| `details.events` | 이벤트 분기 배열 |
| `details.fallbackNext` | 일치하는 이벤트가 없을 때 경로 |

## 이벤트 분기

각 분기가 정의하는 것:

| 필드 | 설명 |
|------|------|
| `id` | 이 분기의 고유 식별자 |
| `name` | 분기의 표시 이름 |
| `conditions` | 일치시킬 이벤트 조건 |
| `filters` | 선택적 파라미터 필터 |
| `next` | 일치 시 다음 노드 ID |

## 이벤트 조건

유연한 규칙을 사용하여 이름으로 이벤트 일치:

| 연산자 | 예시 |
|--------|------|
| Equals | event = "purchase" |
| Does not equal | event != "cancel" |
| Starts with | event starts with "product_" |
| Contains | event contains "click" |
| Matches regex | event matches pattern |

## 이벤트 필터

이벤트 파라미터로 추가 필터링:

| 필터 | 예시 |
|------|------|
| Parameter equals | category = "electronics" |
| Parameter greater than | price > 10000 |
| Parameter contains | title contains "sale" |

## 시간 윈도우

| 설정 | 의미 |
|------|------|
| `timeWindowSeconds` | 이벤트 대기 시간 |

사용자가 여러 일치하는 이벤트를 발생시키면:
- 첫 번째 일치가 승리
- 사용자가 해당 분기로 이동
- 이후 이벤트는 무시됨

## 대체 경로

시간 윈도우 내에 일치하는 이벤트가 없으면:
- 사용자가 `fallbackNext`로 이동
- 필수 항목
- 종종 리마인더나 대안 흐름으로 연결

## 예시 시나리오

```
시간 윈도우: 86400 (1일)

분기 1: "purchase_completed" → [감사 메시지]
분기 2: "cart_updated" → [장바구니 리마인더]
대체: → [재참여 메시지]
```

## 다중 분기

여러 이벤트 분기를 가질 수 있습니다:
- 순서대로 확인됨
- 첫 번째 일치가 승리
- 설계 시 우선순위 고려

## 규칙

- 시간 윈도우 필수
- 최소 하나의 이벤트 분기 권장
- 대체 경로 필수
- 윈도우 동안 이벤트가 실시간으로 확인됨
- 윈도우 동안 사용자의 위치는 "waiting"

## 예외 사항

- 사용자가 윈도우 중에 Journey를 종료하면 분기 중지
- 매우 긴 윈도우는 타임아웃 제한이 있을 수 있음
- 고빈도 이벤트는 경쟁 조건을 일으킬 수 있음

## 관련 문서

- [Segment 분기](/ko/knowledge-base/journeys/nodes/segment-branching) - 사용자 속성에 따른 분기
- [대기 노드](/ko/knowledge-base/journeys/nodes/delay-node) - 단순 대기
- [이벤트](/ko/knowledge-base/concepts/events) - 이벤트 시스템
- [User Journey](/ko/knowledge-base/journeys/index) - Journey 개요
