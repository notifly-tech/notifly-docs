---
hidden: true
title: "Segment 분기 (Segment Branching)"
description: "Segment 분기는 사용자 속성에 따라 Journey를 분기합니다."
---

## 개요

Segment 분기 노드는 사용자 속성을 확인하고 사용자를 다른 경로로 보냅니다. 이벤트 분기(행동을 기다림)와 달리, Segment 분기는 조건을 즉시 확인합니다. 예를 들어, "사용자가 프리미엄 회원이면 경로 A로; 사용자가 서울에 있으면 경로 B로; 그렇지 않으면 경로 C로."

## 작동 방식

1. 사용자가 Segment 분기 노드에 도달함
2. 시스템이 각 Segment에 대해 사용자 속성을 확인함
3. 첫 번째로 일치하는 Segment가 경로를 결정함
4. 일치하는 Segment가 없으면 사용자가 대체로 이동

## 노드 구조

| 필드 | 설명 |
|------|------|
| `type` | 항상 "segment-branching" |
| `details.segments` | Segment 분기 배열 |
| `details.fallbackNext` | 일치하는 Segment가 없을 때 경로 |

## Segment 분기

각 분기가 정의하는 것:

| 필드 | 설명 |
|------|------|
| `id` | 이 분기의 고유 식별자 |
| `name` | 분기의 표시 이름 |
| `segment` | 확인할 Segment 조건 |
| `next` | 일치 시 다음 노드 ID |

## Segment 조건

Campaign과 동일한 Segment 형식 사용:
- 조건 그룹
- 연산자 (equals, greater than, contains 등)
- AND/OR로 결합된 다중 조건

전체 세부 사항은 [Segment](/ko/knowledge-base/concepts/segments)를 참조하세요.

## 조건 유형

확인할 수 있는 것:

| 유형 | 예시 |
|------|------|
| 사용자 속성 | membership_level, signup_date |
| 사용자 메타데이터 | 커스텀 속성 |
| 디바이스 속성 | 플랫폼, 앱 버전 |
| 이벤트 기록 | 이벤트 X를 Y번 했음 |
| Campaign 노출 | Campaign Y를 받았음 |

## 대체 경로

일치하는 Segment가 없으면:
- 사용자가 `fallbackNext`로 이동
- 필수 항목
- 일치하지 않는 모든 사용자를 수용

## 예시 시나리오

```
분기 1: membership_level = "premium" → [프리미엄 오퍼]
분기 2: total_purchases >= 5 → [로열티 보상]
분기 3: signup_date in last 7 days → [신규 사용자 가이드]
대체: → [일반 메시지]
```

## 순서가 중요함

Segment는 순서대로 확인됩니다:
- 첫 번째 일치가 승리
- 여러 Segment에 일치하는 사용자는 첫 번째로 이동
- 순서를 신중하게 설계

## 즉시 평가

이벤트 분기와 달리:
- 대기 기간 없음
- 사용자가 노드에 도달하면 즉시 확인
- 현재 사용자 상태를 기반으로 함

## 규칙

- 최소 하나의 Segment 분기 권장
- 대체 경로 필수
- Segment는 배열 순서대로 확인됨
- 평가는 현재 사용자 데이터 사용

## 예외 사항

- 사용자 데이터를 사용할 수 없으면 Segment가 일치하지 않을 수 있음
- 복잡한 Segment는 평가 지연이 있을 수 있음
- 이벤트 기반 조건은 기록 데이터 사용

## 관련 문서

- [이벤트 분기](/ko/knowledge-base/journeys/nodes/event-branching) - 행동에 따른 분기
- [Segment](/ko/knowledge-base/concepts/segments) - Segment 조건
- [조건 유형](/ko/knowledge-base/segments/condition-types) - 모든 조건 옵션
- [User Journey](/ko/knowledge-base/journeys/index) - Journey 개요
