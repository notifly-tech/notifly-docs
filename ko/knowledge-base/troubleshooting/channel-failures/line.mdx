---
hidden: true
title: "LINE Failures (LINE 장애)"
description: "LINE 메시지가 전달되지 않는 이유와 해결 방법입니다."
---

## 빠른 참조

| 증상 | 가능한 원인 | 해결책 |
|------|------------|--------|
| 잘못된 사용자 ID | 형식 오류 또는 존재 안함 | LINE 사용자 ID 검증 |
| 사용자 찾을 수 없음 | 연결된 적 없거나 연결 해제됨 | 사용자가 계정 연결 필요 |
| 차단됨 | 사용자가 계정 차단 | 발송 불가 |
| 할당량 초과 | 월간 메시지 한도 도달 | 플랜 업그레이드 또는 대기 |
| API 오류 | 자격증명 또는 설정 오류 | LINE 설정 확인 |

---

## 일반적인 장애

### 잘못된 LINE 사용자 ID

**의미:** 이 사용자에게 저장된 LINE 사용자 ID가 유효하지 않습니다.

**LINE 사용자 ID:**
- LINE Official Account별 각 사용자의 고유 식별자
- 형식: "U"로 시작하고 32개의 16진수 문자가 뒤따르는 문자열
- 예시: `U1234567890abcdef1234567890abcdef`

**일반적인 문제:**
- 잘못된 형식 저장됨
- 다른 LINE 계정의 사용자 ID
- 오타 또는 잘린 ID

**해결 방법:**
- 저장 시 LINE 사용자 ID 형식 검증
- SDK가 올바른 ID를 캡처하는지 확인
- 사용자가 LINE 계정을 다시 연결해야 할 수 있음

---

### 사용자 찾을 수 없음

**의미:** LINE이 이 ID로 사용자를 찾을 수 없습니다.

**발생 이유:**
- 사용자가 LINE을 계정에 연결한 적 없음
- 사용자가 계정 연결을 해제함
- 사용자가 LINE 계정을 삭제함

**처리 방법:**
- 사용자가 LINE 계정을 다시 연결해야 함
- 재연결 전까지 발송 불가
- 사용자를 LINE 없음으로 표시

---

### 사용자가 계정 차단

**의미:** 사용자가 LINE Official Account를 차단했습니다.

**상황:**
- 사용자가 능동적으로 차단함
- 메시지 발송 불가
- "undelivered" 또는 "blocked"로 표시될 수 있음

**처리 방법:**
- 사용자의 선택을 무시할 수 없음
- 사용자를 적절히 표시
- 발송 시도 중지

---

### 사용자가 친구 아님

**의미:** 사용자가 LINE Official Account를 친구로 추가하지 않았습니다.

**LINE 요구사항:**
- 추가한 사용자에게만 메시지 발송 가능
- "팔로잉"이 필요함
- 사용자가 연결을 시작해야 함

**처리 방법:**
- 사용자에게 계정 추가 권장
- 친구가 아닌 사람에게 발송 불가
- 계정 추가 방법을 쉽게 제공

---

## 할당량 및 제한 문제

### 월간 메시지 할당량 초과

**의미:** 해당 월의 허용된 메시지를 모두 사용했습니다.

**LINE 메시지 할당량:**
- 무료 플랜: 월 제한된 메시지
- 유료 플랜: 더 높은 한도
- 추가 비용으로 초과 가능할 수 있음

**확인 방법:**
- LINE Official Account Manager
- 이번 달 사용량 확인

**해결 방법:**
- 다음 달까지 대기
- LINE 플랜 업그레이드
- 중요한 메시지 우선순위 지정

---

### API 속도 제한

**의미:** API 요청이 너무 빠르게 너무 많이 발생했습니다.

**LINE 속도 제한:**
- 초당 요청 수 제한
- 엔드포인트별로 상이할 수 있음

**처리 방법:**
- 발송을 시간에 걸쳐 분산
- 가능한 경우 배치 발송 사용
- 백오프와 함께 재시도 구현

---

## 설정 문제

### 채널 액세스 토큰 무효

**의미:** API 자격증명이 잘못되었거나 만료되었습니다.

**증상:**
- 모든 LINE 메시지 실패
- 오류에 "authentication" 또는 "invalid token" 언급

**해결 방법:**
1. LINE Developers Console로 이동
2. 새 채널 액세스 토큰 생성
3. Notifly 프로젝트 설정에서 업데이트

---

### 잘못된 채널 연결됨

**의미:** Notifly가 잘못된 LINE 채널에 연결되어 있습니다.

**증상:**
- 사용자 찾을 수 없음으로 메시지 실패
- 하지만 사용자는 다른 LINE 계정에 존재

**확인 방법:**
- Notifly의 채널 ID가 LINE Official Account와 일치하는지 확인
- LINE Developers Console에서 올바른 채널 확인

---

### Messaging API 미활성화

**의미:** LINE 계정에 Messaging API가 활성화되어 있지 않습니다.

**증상:**
- API 호출 실패
- 프로그래밍 방식으로 메시지 발송 불가

**해결 방법:**
1. LINE Official Account Manager로 이동
2. Messaging API 활성화
3. LINE Developers Console에서 설정

---

## 콘텐츠 문제

### 메시지가 너무 김

**의미:** 메시지가 LINE의 문자 제한을 초과합니다.

**LINE 제한:**
| 메시지 유형 | 제한 |
|-------------|------|
| 텍스트 메시지 | 5,000자 |
| Flex 메시지 | 크기 제한 적용 |

**해결 방법:**
- 메시지 콘텐츠 줄이기
- 필요시 여러 메시지로 분할

---

### 잘못된 메시지 형식

**의미:** 메시지 구조가 LINE 요구사항과 맞지 않습니다.

**일반적인 문제:**
- 리치 메시지용 잘못된 JSON
- 지원되지 않는 메시지 유형
- 필수 필드 누락

**해결 방법:**
- 메시지 형식 검증
- LINE 메시지 유형 올바르게 사용
- 필수 필드에 대한 문서 확인

---

### 리치 콘텐츠 문제

**의미:** Flex 메시지, 이미지 또는 기타 리치 콘텐츠에 문제가 있습니다.

**일반적인 문제:**
- 이미지 URL 접근 불가
- 이미지 형식 또는 크기 오류
- Flex JSON 무효

**해결 방법:**
- 이미지 URL이 공개적으로 접근 가능한지 확인
- 지원되는 이미지 형식 사용
- Flex 메시지 JSON 검증

---

## 디버깅 체크리스트

### 발송 전

- [ ] 사용자 프로필에 LINE 사용자 ID가 있는가?
- [ ] LINE 사용자 ID 형식이 유효한가?
- [ ] 사용자가 LINE 계정의 친구인가?
- [ ] 채널 액세스 토큰이 유효한가?
- [ ] Messaging API가 활성화되어 있는가?
- [ ] 월간 할당량이 남아 있는가?

### 실패 후

- [ ] 발송 로그에 어떤 오류 메시지가 있는가?
- [ ] 한 사용자인가 모든 사용자인가?
- [ ] LINE 사용자 ID 유효성 확인
- [ ] LINE 콘솔에서 할당량 상태 확인
- [ ] API 자격증명이 여전히 작동하는가?

---

## 오류 메시지 참조

| 오류 | 의미 | 조치 |
|------|------|------|
| Invalid user ID | ID 형식 잘못됨 | ID 형식 검증 |
| User not found | ID가 존재하지 않음 | 사용자가 재연결 필요 |
| Not friend | 사용자가 팔로우하지 않음 | 발송 불가 |
| Blocked | 사용자가 차단함 | 제외로 표시 |
| Rate limited | 요청이 너무 많음 | 속도 줄이기 |
| Unauthorized | 토큰 무효 | 자격증명 업데이트 |
| Quota exceeded | 월간 한도 도달 | 업그레이드 또는 대기 |
| Invalid reply token | 응답 토큰 만료됨 | 새 토큰 받기 |

---

## LINE 메시지 유형

| 유형 | 설명 | 사용 시점 |
|------|------|----------|
| Text | 일반 텍스트 | 간단한 메시지 |
| Image | 단일 이미지 | 시각적 콘텐츠 |
| Video | 비디오 콘텐츠 | 리치 미디어 |
| Audio | 오디오 콘텐츠 | 음성 메시지 |
| Location | 지도 위치 | 위치 공유 |
| Sticker | LINE 스티커 | 캐주얼, 참여형 |
| Flex | 커스텀 레이아웃 | 리치, 인터랙티브 |
| Template | 미리 정의된 레이아웃 | 버튼, 캐러셀 |

---

## Push vs Reply 메시지

### Push 메시지

- 사용자 메시지 없이 언제든지 발송
- 채널 액세스 토큰 사용
- 할당량에 포함

### Reply 메시지

- 사용자 메시지에 대한 응답
- 응답 토큰 사용 (~30초 후 만료)
- Push 할당량에 포함되지 않음

**일반적인 문제:** 만료된 응답 토큰 사용

---

## 다인 채팅

**의미:** 그룹 채팅 또는 룸에서의 메시지.

**특별 고려사항:**
- 그룹 컨텍스트에서 다른 사용자 ID
- 그룹 ID와 사용자 ID가 필요할 수 있음
- 일부 메시지 유형 사용 불가

---

## 관련 문서

- [LINE 채널](/ko/knowledge-base/channels/line) - 채널 개요
- [채널 장애 인덱스](/ko/knowledge-base/troubleshooting/channel-failures/index) - 모든 채널 장애
- [메시지가 발송되지 않음](/ko/knowledge-base/troubleshooting/message-not-sending) - 일반 문제 해결

---
*이 가이드로 LINE 메시지 발송 문제를 진단하고 해결하세요.*
