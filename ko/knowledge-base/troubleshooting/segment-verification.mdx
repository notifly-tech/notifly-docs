---
hidden: true
title: "Segment Verification (세그먼트 검증)"
description: "Segment 수가 예상과 다른 이유를 확인하는 방법입니다."
---

## 빠른 참조

| 문제 | 바로가기 |
|------|---------|
| Segment가 0명 표시 | [0명 사용자](#segment가-0명-표시) |
| 사용자가 너무 적음 | [예상보다 적음](#예상보다-적은-사용자) |
| 사용자가 너무 많음 | [예상보다 많음](#예상보다-많은-사용자) |
| 수가 계속 변함 | [변동하는 수](#변동하는-수) |
| 잘못된 사용자 포함 | [잘못된 사용자](#segment에-잘못된-사용자) |

---

## Segment 수 이해하기

### 수가 계산되는 방식

| Segment 유형 | 계산 시점 |
|-------------|----------|
| Condition | 미리보기 또는 사용 시 재평가 |
| Cohort | 생성 시점에 고정 |
| CSV | 업로드된 파일 기준 |

**중요:** Condition segment 수는 동적입니다. 사용자 데이터가 변경되면 수도 변경됩니다.

---

### 미리보기 vs 실제

| 미리보기 | 실제 (발송 시점) |
|---------|-----------------|
| 현재 수 표시 | 타이밍에 따라 다를 수 있음 |
| 현재 데이터 기준 | Campaign 실행 시 데이터 기준 |
| 추정에 유용 | 실제 대상자 |

**참고:** 예약 campaign의 경우, 미리보기와 발송 시점 사이에 사용자가 segment에 들어오거나 나갈 수 있습니다.

---

## Segment가 0명 표시

### 조건 문제

**각 조건 확인:**

| 문제 | 예시 | 해결책 |
|------|------|--------|
| 필드 이름 오타 | `usre_name` vs `user_name` | 철자 수정 |
| 잘못된 대소문자 | `Email` vs `email` | 정확한 대소문자 맞추기 |
| 존재하지 않는 필드 | 아무도 갖지 않은 속성 사용 | 존재하는 필드 사용 |
| 일치하지 않는 값 | `country = "USA"` 지만 데이터는 `"US"` | 저장된 값과 일치시키기 |

---

### 연산자 문제

| 연산자 | 일반적인 실수 |
|--------|--------------|
| equals | 대소문자 구분 문자열 비교 |
| contains | 정확한 일치 찾기 대신 사용 |
| greater than | 숫자 대신 문자열에 사용 |
| is set | 필드가 존재하지만 비어있음 |
| is not set | 필드가 null vs 누락 |

---

### 그룹 로직 문제

**AND vs OR:**

```
# 이것은 둘 다 참이어야 함 (매우 제한적):
Group 1: country = "US" AND country = "Korea"
결과: 0명 (둘 다 맞는 것은 불가능)

# 이것은 둘 중 하나만 참이면 됨:
Group 1: country = "US"
Group 2: country = "Korea"
group_operator: OR
결과: 모든 US와 Korea 사용자
```

**해결:** 조건이 AND (모두 일치해야 함) 또는 OR (어느 것이든 일치 가능)이어야 하는지 검토

---

### 사용자 데이터 없음

**증상:** Segment에 사용자가 있어야 하지만 0명 표시

**확인:**
1. 프로젝트에 사용자가 존재하나?
2. 사용자가 필터링하는 속성을 가지고 있나?
3. 사용자 데이터가 동기화되었나?

**디버그:**
- Segment에 있어야 할 특정 사용자 조회
- 필요한 속성이 있는지 확인
- 속성 값이 조건과 일치하는지 확인

---

## 예상보다 적은 사용자

### 조건이 너무 제한적

**증상:** 100명 예상, 10명만 발견

**확인:**
- AND로 결합된 조건이 몇 개?
- 각 조건이 수를 크게 줄이나?

**디버그 접근법:**
1. 첫 번째 조건만으로 시작, 수 확인
2. 두 번째 조건 추가, 새 수 확인
3. 가장 제한적인 조건을 찾을 때까지 계속

---

### 속성 값 불일치

**일반적인 데이터 형식 불일치:**

| 예상 | 실제 | 문제 |
|------|------|------|
| `"true"` | `true` | 문자열 vs 불리언 |
| `"123"` | `123` | 문자열 vs 숫자 |
| `"US"` | `"USA"` | 다른 형식 |
| `"john@email.com"` | `"John@Email.com"` | 대소문자 차이 |

**해결:** 실제 저장된 값을 확인하고 정확히 일치시키기

---

### 날짜/시간 문제

| 문제 | 예시 |
|------|------|
| 잘못된 타임존 | 사용자의 날짜가 다른 타임존 |
| 잘못된 형식 | ISO 문자열 vs 타임스탬프 |
| 오늘 제외하는 범위 | "지난 7일"이 오늘을 포함 안함 |

---

### 누락된 사용자 속성

**증상:** 사용자가 존재하지만 필터링된 속성이 없음

**확인:**
- 속성이 언제 처음 추적되었나?
- 모든 사용자가 이 속성을 가지고 있나?
- SDK에서 속성이 올바르게 설정되었나?

**일반적인 경우:** 새 사용자만 가지고 있는 속성으로 필터링

---

## 예상보다 많은 사용자

| 원인 | 설명 |
|------|------|
| OR 과다 사용 | AND가 필요한데 OR 사용 시 범위가 넓어짐 |
| Contains vs Equals | `contains "test"`는 test@, mytest@, testing@ 모두 일치 |
| Null 값 포함 | `status != "active"`는 null, 빈 값도 포함 |

**해결:** AND/OR 로직 검토, equals 사용, null 검사 추가

---

## 변동하는 수

Condition segment 수는 동적이며, 사용자 데이터 변경에 따라 변합니다. 이는 **예상되는 동작**입니다.

**급격한 변동 원인:**
- 데이터 동기화 문제 (일시적 불가용)
- 시간 기반 조건 ("지난 7일"은 매일 변함)
- 일괄 속성 업데이트

**예약 campaign:** 미리보기 수와 발송 시점 수가 다를 수 있습니다.

---

## Segment에 잘못된 사용자

**검증 방법:** 사용자 프로필 조회 → 각 조건 대조 → AND/OR 로직 평가

| 문제 | 확인 사항 |
|------|----------|
| 있어야 하지만 없음 | 속성 존재, 값 일치, 모든 AND 조건 충족 |
| 없어야 하지만 있음 | OR 조건 일치, contains 과다 매칭, null 값 포함 |

---

## 디버깅 단계

| 단계 | 방법 |
|------|------|
| 1. 단순화 | 단일 조건으로 시작, 하나씩 추가하며 수 확인 |
| 2. 사용자 테스트 | 알려진 사용자의 속성을 조건과 대조 |
| 3. 데이터 확인 | 실제 저장된 값과 형식 확인 |
| 4. 로직 검토 | AND/OR 로직이 의도한 대로인지 확인 |

---

## Segment 유형 비교

| 유형 | 사용 시점 | 수 동작 |
|------|----------|--------|
| Condition | 동적 대상자 | 사용자 변경에 따라 변함 |
| Cohort | 특정 시점 스냅샷 | 생성 시 고정 |
| CSV | 특정 사용자 목록 | 업로드 목록에 고정 |

---

## 진단 체크리스트

### 0명/적은 수

- [ ] 필드 이름 철자 올바름 (대소문자 구분)
- [ ] 값이 저장된 데이터 형식과 일치
- [ ] AND 로직이 너무 제한적이지 않음
- [ ] 필수 속성을 가진 사용자 존재
- [ ] 시간 범위가 적절함

### 많은 수

- [ ] OR이 너무 포괄적이지 않음
- [ ] "Contains"가 너무 넓게 매칭하지 않음
- [ ] Null/빈 값 처리 올바름
- [ ] 조건이 의도한 대로임

### 검증

- [ ] 알려진 사용자로 테스트
- [ ] Segment 단순화 후 재구성
- [ ] 실제 저장된 값 확인
- [ ] AND/OR 로직 검토

---

## 관련 문서

- [세그먼트](/ko/knowledge-base/segments/index) - Segment 작동 방식
- [조건 유형](/ko/knowledge-base/segments/condition-types) - 사용 가능한 조건
- [연산자](/ko/knowledge-base/segments/operators) - 비교 연산자
- [캠페인 문제](/ko/knowledge-base/troubleshooting/campaign-issues) - Campaign 타겟팅 문제

---
*이 가이드를 사용하여 segment 설정을 검증하고 디버그하세요.*
