---
title: "GTM을 이용한 커스텀 이벤트"
description: "카페24 쇼핑몰에 GTM을 설치하고 노티플라이 커스텀 이벤트를 만드는 방법을 설명합니다."
---

## 1. 카페24 쇼핑몰에 GTM 설치하기

<Note>
  이미 카페24 쇼핑몰에 GTM을 설치하셨다면, 이 단계는 건너뛰셔도 무방합니다.
</Note>

### 1-1. GTM Account 생성하기

1. [Google Tag Manager](https://tagmanager.google.com/) > 우측 상단 **계정 만들기** 에 들어가 계정 생성을 진행합니다. ![GTM 계정 생성](/ko/user-guide/images/user-guide/cafe24/ko/assets/images/gtm-create-account-25d91583432cb7f652ee51e0fe88f37b.png)
2. 계정 생성이 완료되면, 화면에 보이는 GTM 설치 코드를 미리 복사해둡니다. ![GTM 코드](/ko/user-guide/images/user-guide/cafe24/ko/assets/images/gtm-source-code-25083ecc4f6a7e2c31759e9544c20085.png)
3. 카페24 EC Admin > 쇼핑몰 설정 > 기본 설정 > 검색 엔진 최적화 (SEO) > 고급 설정 > 코드 직접입력에 들어가 2번에 나와있는 GTM 설치 코드를 복사하여 붙여넣습니다. ![GTM 코드 삽입](/ko/user-guide/images/user-guide/cafe24/ko/assets/images/gtm-inject-script-240b48f88912da58ebd7d12133643c6f.png)
4. 저장 버튼을 누른 후, 2번 화면의 **3. 웹사이트 테스트** > 테스트 버튼 을 눌러 GTM 설치가 정상적으로 되었는지 확인해주세요. ![GTM 설치 확인](/ko/user-guide/images/user-guide/cafe24/ko/assets/images/gtm-verify-installation-0db05d948f824bc1f7c431a07944d1c9.png)

## 2. 노티플라이 카페24 GTM 템플릿 설치하기

1. [노티플라이 카페24 Template 다운로드](https://github.com/notifly-tech/notifly-gtm-template/releases) 페이지에 접속해 주세요. 최신 버전의 `template-cafe24-custom-event.tpl` 파일을 다운로드 해주세요.

2. 메뉴 왼쪽 하단 **템플릿** 메뉴를 선택하고 우측 상단에 있는 **태그 템플릿 > 새로 만들기** 버튼을 클릭하여 템플릿 편집기를 실행합니다.

   ![새로 만들기](/ko/user-guide/images/user-guide/cafe24/ko/assets/images/gtm-import-1-a553b12f8e82b1134f704b92078fbff2.png)

3. 템플릿 편집기 우측 상단 저장 버튼 오른쪽에 있는 `⋮` 버튼을 클릭하고 **가져오기**를 선택하여 다운받은 맞춤 템플릿 파일을 가져옵니다.

   ![가져오기](/ko/user-guide/images/user-guide/cafe24/ko/assets/images/gtm-import-2-4df7c3960b7c55b4d1ba20ae4c6e0f58.png)

4. 템플릿이 잘 불러와졌다면, 저장 버튼을 클릭해주세요. 왼쪽 하단에 **템플릿이 생성됨** 이라는 팝업이 뜨면서 템플릿 설치가 완료 됩니다.

   ![템플릿 생성](/ko/user-guide/images/user-guide/cafe24/ko/assets/images/gtm-import-3-428989685e57289ee03a0efc91e4cd1b.png)

## 3. 커스텀 이벤트 사용하기

### 3-1. 맞춤 태그 생성 준비하기

1. GTM 콘솔에서 좌측 사이드바의 **태그** 메뉴를 선택합니다.

2. 우측 상단 **새로 만들기** 버튼을 클릭합니다.

   ![새로 만들기](/ko/user-guide/images/user-guide/cafe24/ko/assets/images/gtm-create-custom-tag-1-06368f9a91ce94aab71d0675da716e51.png)

3. 태그 구성 > 맞춤 설정 에서 [노티플라이 카페24 GTM 템플릿 설치하기](#2-notifly-cafe24-gtm-템플릿-설치하기)에서 설치해 놓았던 템플릿을 선택합니다.

   ![맞춤 태그 생성](/ko/user-guide/images/user-guide/cafe24/ko/assets/images/gtm-create-custom-tag-2-58102cb3903638af82716d835cdde8f3.png)

### 3-2. 커스텀 이벤트 사용 예제

<Check>
  GTM이 제공하는 더 다양한 기능을 활용하여 여러분의 쇼핑몰에 맞는 고도화된 커스텀 이벤트를 만들어 보세요. 이 섹션에서는 한 가지 예제만을 소개합니다.
</Check>

#### 3-2-1. 개요

이 섹션에서는 유저가 카페24 쇼핑몰에 들어와서, 돋보기 버튼을 클릭하였을 때 `search-icon-clicked` 이벤트를 노티플라이에 전송하는 예제를 보여줍니다.

![카페24 샘플 쇼핑몰](/ko/user-guide/images/user-guide/cafe24/ko/assets/images/cafe24-sample-mall-screenshot-26e825e94259d3fb6fb9d77dfc1cadb9.png)

#### 3-2-2. 돋보기 버튼 특정하기

GTM에서는 태그를 언제 실행할지를 결정하는 **트리거** 라는 개념을 사용합니다. 이를 위해서는, 유저가 돋보기 버튼을 클릭하였을 때, GTM이 이를 감지할 수 있도록 **트리거** 를 생성해야 하고, 돋보기 버튼을 특정할 수 있어야 합니다.

1. 브라우저에서 돋보기 버튼을 우클릭한 후 **검사** 를 클릭하면 해당 요소의 HTML 코드가 하이라이트 되어 나타납니다.

![돋보기 아이콘 검사](/ko/user-guide/images/user-guide/cafe24/ko/assets/images/search-icon-inspection-bd9401ab1184cb97d042294b3264536b.png)

2. 하이라이트된 코드를 우클릭하고, **복사 > selector 복사** 를 클릭해주세요. 이렇게 복사한 selector는 아래 **트리거 생성**에서 돋보기 버튼을 특정하는데 사용되니, 꼭 어딘가에 복사해두세요. `#top_nav_box > div.top_mypage > a.eSearch > svg` 와 같은 문자열이 복사되었다면 성공입니다.

![selector 복사](/ko/user-guide/images/user-guide/cafe24/ko/assets/images/copy-css-selector-b610cca9c24d57ce9bd22e1272b64475.png)

#### 3-2-3. 트리거 생성하기

1. 3-1 섹션에서 생성한 태그 구성 아래에 있는 **트리거** 를 클릭합니다.

2. 트리거 선택의 우측 상단에 **+** 버튼 > **트리거 구성** 을 클릭해 주세요.

   ![트리거 생성](/ko/user-guide/images/user-guide/cafe24/ko/assets/images/gtm-create-trigger-1-ba6d78f6a9632636f9d9804e9e3b2fdd.png)

3. 트리거 유형 선택 > 클릭 > 모든 요소 를 선택하고, **일부 클릭**을 선택합니다.

   ![트리거 유형 선택](/ko/user-guide/images/user-guide/cafe24/ko/assets/images/gtm-create-trigger-2-5c2cb84c2e9097ac862e10626d529b00.png)

4. 조건을 **Click Element**, **CSS 선택 도구와 일치**, **`3-2-2에서 복사해둔 selector`** 로 설정합니다.

   ![트리거 조건 설정](/ko/user-guide/images/user-guide/cafe24/ko/assets/images/gtm-create-trigger-3-2616cbac16c384a7a5be2e594402f4a2.png)

   <Check>
     드랍다운 하단 기본 제공 변수 선택 > Click Element를 추가해줍니다.
   </Check>

5. **저장** 버튼을 클릭하여 생성해둔 트리거를 저장해주세요.

#### 3-2-4. 태그 완성하기

1. [맞춤 태그 생성 준비하기](#3-1-맞춤-태그-생성-준비하기)에서 생성해둔 태그에 이벤트 이름을 입력합니다. 돋보기 버튼 클릭 이벤트이기 때문에, `search-icon-clicked` 이벤트라고 이름을 짓겠습니다. 이벤트 이름은 자유롭게 설정 가능합니다.

   ![태그 완성하기](/ko/user-guide/images/user-guide/cafe24/ko/assets/images/complete-tag-creation-488d5cbaf6565931fec8ed47cfd99294.png)

2. 우측 상단 **저장** 버튼을 클릭하여 태그를 저장합니다.

이제 모든 설정이 완료되었습니다. 카페24 쇼핑몰에 접속하여 돋보기 버튼을 클릭해보세요. 노티플라이에 `search-icon-clicked` 이벤트가 전송되는 것을 확인할 수 있습니다. 이벤트를 발생시킨 유저를 확인하고 싶다면, **노티플라이 콘솔 > 유저 리스트 > 유저 검색하기 > 유저 ID 입력 > 일별 이벤트 발생 빈도** 에서 확인할 수 있습니다.

![노티플라이 콘솔](/ko/user-guide/images/user-guide/cafe24/ko/assets/images/verify-event-tracking-06ea0f5fb6b74c8107ca44aa34b6c1da.png)
